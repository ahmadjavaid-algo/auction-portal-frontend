<div class="site-layout">
  <!-- Top bar -->
  <header class="site-header">
    <div class="shell">
      <!-- Left: brand -->
      <a routerLink="/bidder/dashboard" class="brand-link">
        <img
          src="https://media.licdn.com/dms/image/v2/C560BAQGJ-j7r23Z79Q/company-logo_200_200/company-logo_200_200/0/1656698792543/algoai_logo?e=2147483647&v=beta&t=QaHGa0R70yu1J352TZfGUk4z2PUigcta-pMyLIznFG8"
          alt="Algo"
        />
        <span>Algo Auction</span>
      </a>

      <!-- Center: main navigation -->
      <nav class="main-nav">
        <a routerLink="/bidder/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">Home</a>
        <a routerLink="/bidder/allauctions" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">Platform</a>
        <a routerLink="/bidder/auctions" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">Auctions</a>
        <a routerLink="/bidder/newcars-list" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">New Cars</a>
        <a routerLink="/bidder/pricing" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">Pricing</a>
        <a routerLink="/bidder/info" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">Get in Touch</a>
        <a routerLink="/bidder/favourites-list" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}" class="fav">
          <mat-icon>favorite_border</mat-icon>
          <span>Favorites</span>
        </a>
        <button class="sell-btn" routerLink="/bidder/auctions">Sell Now</button>
      </nav>

      <!-- Right: notifications + user dropdown -->
      <div class="header-right">
        <!-- Notifications -->
        <div #notifHost class="notif-wrapper">
          <button class="icon-btn" aria-label="Notifications" (click)="toggleNotifications()">
            <mat-icon>notifications</mat-icon>
            <span class="dot" *ngIf="unreadCount > 0"></span>
          </button>

          <div class="notif-panel" *ngIf="notifOpen">
            <div class="notif-header">
              <span>Notifications</span>
              <div class="right">
                <span class="badge" *ngIf="unreadCount > 0">{{ unreadCount }} new</span>
                <button
                  type="button"
                  class="clear-btn"
                  *ngIf="notifications.length"
                  (click)="clearNotifications($event)"
                >
                  Clear all
                </button>
              </div>
            </div>

            <div class="notif-list" *ngIf="notifications.length; else noNotif">
              <button class="notif-item" *ngFor="let n of notifications">
                <div class="notif-main">
                  <div class="title">
                    {{ n.title }}
                    <span class="pill" *ngIf="!n.read">NEW</span>
                  </div>
                  <div class="msg">{{ n.message }}</div>
                </div>
                <div class="time">{{ n.createdAt | date: 'shortTime' }}</div>
              </button>
            </div>

            <ng-template #noNotif>
              <div class="notif-empty">
                <mat-icon>notifications_none</mat-icon>
                <span>No notifications yet.</span>
              </div>
            </ng-template>
          </div>
        </div>

        <!-- User dropdown -->
        <div #dropdown class="user" [class.open]="dropdownOpen" (click)="toggleDropdown()">
          <div class="avatar">{{ (displayName || 'U') | slice:0:1 }}</div>
          <span class="name">{{ displayName }}</span>
          <mat-icon>expand_more</mat-icon>
          <ul>
            <li><a (click)="goAccount($event)">Account</a></li>
            <li><a (click)="changePassword()">Change Password</a></li>
            <li><a (click)="logout()">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <!-- Page body -->
  <main class="site-body">
    <router-outlet></router-outlet>
  </main>
</div>
