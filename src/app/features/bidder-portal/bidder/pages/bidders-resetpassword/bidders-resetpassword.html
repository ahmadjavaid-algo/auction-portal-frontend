<div class="auth-page">
  <div class="scene-background">
    <div #canvasContainer class="canvas-3d"></div>
    <div class="gradient-overlay"></div>
  </div>

  <div class="auth-container">
    <div class="auth-card" [@cardEnter]>
      <div class="card-header" [@fadeInUp]>
        <div class="logo-section">
          <img
            class="logo"
            src="https://media.licdn.com/dms/image/v2/C560BAQGJ-j7r23Z79Q/company-logo_200_200/company-logo_200_200/0/1656698792543/algoai_logo?e=2147483647&v=beta&t=QaHGa0R70yu1J352TZfGUk4z2PUigcta-pMyLIznFG8"
            alt="Algo"
          />
          <div class="logo-text">
            <span class="logo-main">ALGO</span>
            <span class="logo-divider">×</span>
            <span class="logo-sub">AUCTION</span>
          </div>
        </div>
      </div>

      <div class="card-body" [@fadeInUp]>
        <div class="welcome-section">
          <h1 class="title">Reset password</h1>
          <p class="subtitle">Choose a new password for your account</p>
        </div>

        <!-- Success -->
        <div class="success-message" *ngIf="success" [@slideDown]>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6 9 17l-5-5"></path>
          </svg>
          <span>Password updated. Redirecting to sign in…</span>
        </div>

        <!-- Form -->
        <form *ngIf="!success" [formGroup]="form" (ngSubmit)="submit()" class="login-form" novalidate>
          <div class="form-group">
            <label class="form-label">Email address</label>
            <input
              type="email"
              formControlName="email"
              readonly
              class="form-input"
              placeholder="name@company.com"
              autocomplete="email"
            />
            <div class="field-hint">We’ll reset the password for this email.</div>
          </div>

          <div class="form-group">
            <label class="form-label">New password</label>
            <input
              type="password"
              formControlName="password"
              class="form-input"
              placeholder="Enter a new password"
              autocomplete="new-password"
            />

            <div class="field-error" *ngIf="f.password.touched && f.password.hasError('required')">
              Password is required.
            </div>
            <div class="field-error" *ngIf="f.password.touched && f.password.hasError('minlength')">
              Must be at least 6 characters.
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Confirm password</label>
            <input
              type="password"
              formControlName="confirm"
              class="form-input"
              placeholder="Confirm your new password"
              autocomplete="new-password"
            />

            <div class="field-error" *ngIf="f.confirm.touched && f.confirm.hasError('required')">
              Please confirm your password.
            </div>
            <div
              class="field-error"
              *ngIf="f.confirm.touched && f.confirm.value && f.confirm.value !== f.password.value"
            >
              Passwords do not match.
            </div>
          </div>

          <input type="hidden" formControlName="code" />

          <div class="error-message" *ngIf="error" [@slideDown]>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <span>{{ error }}</span>
          </div>

          <button type="submit" class="btn-submit" [class.is-loading]="loading" [disabled]="loading || form.invalid">
            <span class="btn-glass"></span>
            <span class="btn-shine"></span>
            <span class="btn-text" *ngIf="!loading">Reset password</span>
            <span class="loader-spinner" *ngIf="loading"></span>
          </button>
        </form>
      </div>

      <div class="card-footer" [@fadeInUp]>
        <span class="footer-text">Remembered your password?</span>
        <a routerLink="/bidder/login" class="footer-link">Sign in</a>
      </div>
    </div>
  </div>
</div>
