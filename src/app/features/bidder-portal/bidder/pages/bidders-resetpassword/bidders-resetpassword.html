<div class="login-container reset">
  <div class="auth-card">
    <!-- LEFT: visual (same as login) -->
    <div class="visual">
      <figure class="scene-wrap">
        <img
          class="scene"
          src="https://images.unsplash.com/photo-1560611811-8a87a5239655?w=1600&auto=format&fit=crop&q=80"
          alt="Premium car close-up"
        />
      </figure>
    </div>

    <!-- RIGHT: glass panel -->
    <div class="panel">
      <div class="panel-inner">
        <!-- Brand row -->
        <div class="brand-head">
          <img
            class="logo"
            src="https://media.licdn.com/dms/image/v2/C560BAQGJ-j7r23Z79Q/company-logo_200_200/company-logo_200_200/0/1656698792543/algoai_logo?e=2147483647&v=beta&t=QaHGa0R70yu1J352TZfGUk4z2PUigcta-pMyLIznFG8"
            alt="Algo"
          />
          <div class="brand-text">
            <div class="brand-name">Algo Auction Portal</div>
            <div class="brand-tag">Secure bidder access</div>
          </div>
        </div>

        <h1>Reset password</h1>
        <p class="hint">Choose a new password for your account.</p>

        <!-- Success state -->
        <ng-container *ngIf="success; else resetForm">
          <div class="success-card">
            <div class="icn-wrap">✓</div>
            <h3>Password updated</h3>
            <p>Your password has been changed. You can now sign in.</p>
            
          </div>
        </ng-container>

        <!-- Form -->
        <ng-template #resetForm>
          <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
            <label class="field">
              <span class="label">Email</span>
              <input type="email" formControlName="email" readonly />
              <div class="hint">We’ll reset the password for this email.</div>
            </label>

            <label class="field">
              <span class="label">New password</span>
              <input
                type="password"
                formControlName="password"
                autocomplete="new-password"
              />
              <div class="error" *ngIf="f.password.touched && f.password.hasError('required')">
                Password is required.
              </div>
              <div class="error" *ngIf="f.password.touched && f.password.hasError('minlength')">
                Must be at least 6 characters.
              </div>
            </label>

            <label class="field">
              <span class="label">Confirm password</span>
              <input
                type="password"
                formControlName="confirm"
                autocomplete="new-password"
              />
              <div class="error" *ngIf="f.confirm.touched && f.confirm.hasError('required')">
                Please confirm your password.
              </div>
              <div class="error" *ngIf="f.confirm.touched && f.confirm.value && f.confirm.value !== f.password.value">
                Passwords do not match.
              </div>
            </label>

            <input type="hidden" formControlName="code" />

            <div class="form-msg" *ngIf="error">{{ error }}</div>

            <button type="submit" class="btn-primary" [disabled]="loading || form.invalid">
              {{ loading ? 'Updating…' : 'Reset password' }}
            </button>

            <div class="foot single">
              <a routerLink="/bidder/login" class="muted">Back to sign in</a>
            </div>
          </form>
        </ng-template>
      </div>
    </div>
  </div>
</div>
