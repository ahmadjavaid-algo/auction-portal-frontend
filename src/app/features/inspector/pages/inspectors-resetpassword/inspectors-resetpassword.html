<!-- src/app/pages/inspector/inspectors-resetpassword/inspectors-resetpassword.html -->
<div class="login-container reset-container">
  <!-- Purple Gradient Background with Wave -->
  <div class="background-wave">
    <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
      <path
        fill="url(#gradient)"
        d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"
      ></path>
      <defs>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:#6b46c1;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
        </linearGradient>
      </defs>
    </svg>
  </div>

  <!-- Main Content -->
  <div class="content-wrapper">
    <!-- Logo Section -->
    <div class="logo-section">
      <img
        src="https://media.licdn.com/dms/image/v2/C560BAQGJ-j7r23Z79Q/company-logo_200_200/company-logo_200_200/0/1656698792543/algoai_logo?e=2147483647&v=beta&t=QaHGa0R70yu1J352TZfGUk4z2PUigcta-pMyLIznFG8"
        alt="Algo Logo"
        class="main-logo"
      />
      <div class="welcome-text">
        <span>Reset</span>
        <span class="wave-emoji">üîí</span>
        <span>Password</span>
      </div>
    </div>

    <!-- Reset Card -->
    <div class="login-section">
      <div class="login-card reset-card">
        <h1>Set a new password</h1>
        <p class="subtitle">
          Choose a strong password to keep your inspector account secure.
        </p>

        <!-- Error Message -->
        <div class="error-message" *ngIf="error && !loading">
          {{ error }}
        </div>

        <!-- Success Message -->
        <div class="status-banner ok" *ngIf="success">
          Password updated successfully. Redirecting you to the login page‚Ä¶
        </div>

        <form [formGroup]="form" (ngSubmit)="submit()">
          <!-- Email (readonly) -->
          <div class="form-group">
            <label for="email">Email</label>
            <input
              id="email"
              type="email"
              formControlName="email"
              readonly
            />
            <div class="hint">
              We‚Äôll reset the password for this email address.
            </div>
          </div>

          <!-- New Password -->
          <div class="form-group">
            <label for="password">New password</label>
            <input
              id="password"
              type="password"
              formControlName="password"
              placeholder="Enter a new password"
            />
            <div class="field-error" *ngIf="f.password.touched && f.password.hasError('required')">
              Password is required.
            </div>
            <div class="field-error" *ngIf="f.password.touched && f.password.hasError('minlength')">
              Must be at least 6 characters.
            </div>
          </div>

          <!-- Confirm Password -->
          <div class="form-group">
            <label for="confirm">Confirm password</label>
            <input
              id="confirm"
              type="password"
              formControlName="confirm"
              placeholder="Re-enter your new password"
            />
            <div class="field-error" *ngIf="f.confirm.touched && f.confirm.hasError('required')">
              Please confirm your password.
            </div>
            <div
              class="field-error"
              *ngIf="
                f.confirm.touched &&
                f.confirm.value &&
                f.password.value &&
                f.confirm.value !== f.password.value
              "
            >
              Passwords do not match.
            </div>
          </div>

          <!-- Hidden code -->
          <input type="hidden" formControlName="code" />

          <!-- Submit Button -->
          <button
            type="submit"
            class="login-button primary-btn"
            [disabled]="loading || form.invalid"
          >
            <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
            <span *ngIf="!loading">Reset password</span>
          </button>

          <!-- Back to login -->
          <div class="back-row">
            <a routerLink="/inspector/login">
              ‚Üê Back to sign in
            </a>
          </div>
        </form>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer-note">
      ¬© {{ currentYear }} Algo Auction Portal
    </footer>
  </div>
</div>
