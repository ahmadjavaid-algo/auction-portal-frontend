<div class="cp-page" #pageRoot>
  <!-- FULL-WIDTH HERO (same DNA as Users page) -->
  <section class="cp-hero reveal-on-scroll">
    <div class="hero-background">
      <div class="hero-gradient"></div>
      <div class="hero-pattern"></div>
    </div>

    <div class="hero-content-wrapper">
      <div class="hero-main">
        <div class="hero-text">
          <div class="hero-badge">
            <mat-icon>security</mat-icon>
            Account Security
          </div>

          <h1 class="hero-title">Change Password</h1>
          <p class="hero-description">
            Protect your admin access with a stronger password — built for a premium auction platform.
          </p>
        </div>

        <div class="hero-side">
          <div class="hero-mini-card">
            <div class="mini-icon">
              <mat-icon>vpn_key</mat-icon>
            </div>
            <div class="mini-meta">
              <div class="mini-title">Security Tip</div>
              <div class="mini-sub">
                Use a unique password you don’t reuse elsewhere.
              </div>
            </div>
            <div class="mini-glow"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTENT -->
  <section class="cp-content reveal-on-scroll">
    <div class="cp-shell">
      <!-- FORM CARD -->
      <div class="cp-card">
        <div class="card-head">
          <div class="head-icon">
            <mat-icon>lock_reset</mat-icon>
          </div>
          <div class="head-text">
            <div class="head-title">Update your password</div>
            <div class="head-sub">Enter your current password and choose a new one.</div>
          </div>
        </div>

        <form #f="ngForm" (ngSubmit)="submit(f)" class="cp-form">
          <!-- Current -->
          <mat-form-field appearance="outline" class="field">
            <mat-label>Current password</mat-label>
            <input
              matInput
              [type]="showCurrent ? 'text' : 'password'"
              name="currentPassword"
              [(ngModel)]="currentPassword"
              required
              autocomplete="current-password"
              placeholder="Enter current password"
            />
            <button
              mat-icon-button
              matSuffix
              type="button"
              class="eye-btn"
              (click)="showCurrent = !showCurrent"
              [matTooltip]="showCurrent ? 'Hide' : 'Show'"
            >
              <mat-icon>{{ showCurrent ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </mat-form-field>

          <!-- New -->
          <mat-form-field appearance="outline" class="field">
            <mat-label>New password</mat-label>
            <input
              matInput
              [type]="showNew ? 'text' : 'password'"
              name="newPassword"
              [(ngModel)]="newPassword"
              required
              minlength="8"
              autocomplete="new-password"
              placeholder="Create a new password"
            />
            <button
              mat-icon-button
              matSuffix
              type="button"
              class="eye-btn"
              (click)="showNew = !showNew"
              [matTooltip]="showNew ? 'Hide' : 'Show'"
            >
              <mat-icon>{{ showNew ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </mat-form-field>

          <!-- Strength + Rules -->
          <div class="strength">
            <div class="strength-top">
              <div class="strength-label">
                <mat-icon>bolt</mat-icon>
                Strength
              </div>
              <div class="strength-value">
                <span class="pct">{{ strengthPercent }}%</span>
                <span class="txt">{{ strengthLabel }}</span>
              </div>
            </div>

            <div class="strength-bar">
              <div class="fill" [style.width.%]="strengthPercent"></div>
            </div>

            <div class="rules">
              <div class="rule" [class.ok]="ruleMinLen">
                <mat-icon>{{ ruleMinLen ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
                At least 8 characters
              </div>
              <div class="rule" [class.ok]="ruleUpper">
                <mat-icon>{{ ruleUpper ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
                One uppercase letter (A–Z)
              </div>
              <div class="rule" [class.ok]="ruleLower">
                <mat-icon>{{ ruleLower ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
                One lowercase letter (a–z)
              </div>
              <div class="rule" [class.ok]="ruleNumber">
                <mat-icon>{{ ruleNumber ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
                One number (0–9)
              </div>
              <div class="rule" [class.ok]="ruleSpecial">
                <mat-icon>{{ ruleSpecial ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
                One symbol (!@#$…)
              </div>
            </div>
          </div>

          <!-- Confirm -->
          <mat-form-field appearance="outline" class="field">
            <mat-label>Confirm new password</mat-label>
            <input
              matInput
              [type]="showConfirm ? 'text' : 'password'"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              required
              minlength="8"
              autocomplete="new-password"
              placeholder="Re-enter new password"
            />
            <button
              mat-icon-button
              matSuffix
              type="button"
              class="eye-btn"
              (click)="showConfirm = !showConfirm"
              [matTooltip]="showConfirm ? 'Hide' : 'Show'"
            >
              <mat-icon>{{ showConfirm ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </mat-form-field>

          <!-- Mismatch hint -->
          <div class="mismatch" *ngIf="confirmPassword && newPassword && (confirmPassword !== newPassword)">
            <mat-icon>error</mat-icon>
            New password and confirmation do not match.
          </div>

          <!-- Actions -->
          <div class="actions">
            <button
              mat-stroked-button
              type="button"
              class="btn secondary"
              (click)="cancel()"
              [disabled]="saving"
            >
              <mat-icon>arrow_back</mat-icon>
              Cancel
            </button>

            <button
              mat-flat-button
              type="submit"
              class="btn primary"
              [disabled]="!canSubmit"
            >
              <mat-spinner *ngIf="saving" diameter="18"></mat-spinner>
              <mat-icon *ngIf="!saving">check</mat-icon>
              <span>{{ saving ? 'Saving…' : 'Save password' }}</span>
            </button>
          </div>
        </form>
      </div>

      <!-- SIDE INFO -->
      <div class="cp-side">
        <div class="side-card">
          <div class="side-title">
            <mat-icon>verified_user</mat-icon>
            Why this matters
          </div>
          <p class="side-text">
            Admin accounts control inventory, verification, and auction settings. A stronger password helps prevent
            takeover and protects your platform’s trust.
          </p>

          <div class="side-divider"></div>

          <div class="side-bullets">
            <div class="bullet">
              <mat-icon>check_circle</mat-icon>
              Use a unique password
            </div>
            <div class="bullet">
              <mat-icon>check_circle</mat-icon>
              Avoid personal names/dates
            </div>
            <div class="bullet">
              <mat-icon>check_circle</mat-icon>
              Prefer longer phrases
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
