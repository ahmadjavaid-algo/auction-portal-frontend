<form class="dialog-form" [formGroup]="form" (ngSubmit)="onSubmit()" autocomplete="off">
  <!-- Header -->
  <div class="header">
    <div class="title">
      <h2>{{ mode === 'edit' ? 'Edit auction' : 'Create auction' }}</h2>
      <p class="sub">
        Set schedule & bid increment. Status is computed automatically.
      </p>

      <!-- Read-only status chip in edit mode -->
      <div class="status-chip" *ngIf="computedStatusLabel">
        <mat-icon>info</mat-icon>
        {{ computedStatusLabel }}
      </div>
    </div>
  </div>

  <!-- Body -->
  <mat-dialog-content class="body">
    <div class="sheet">
      <div class="grid">

        <!-- Auction Name -->
        <mat-form-field appearance="outline">
          <mat-label>Auction name *</mat-label>
          <input matInput formControlName="auctionName" maxlength="200" />
          <mat-hint align="end">{{ (form.get('auctionName')?.value?.length || 0) }}/200</mat-hint>
          <mat-error *ngIf="form.get('auctionName')?.hasError('required')">Name is required</mat-error>
        </mat-form-field>

        <!-- Start date -->
        <mat-form-field appearance="outline">
          <mat-label>Start date *</mat-label>
          <input matInput [matDatepicker]="sd" formControlName="startDate" />
          <mat-datepicker-toggle matSuffix [for]="sd"></mat-datepicker-toggle>
          <mat-datepicker #sd></mat-datepicker>
          <mat-error *ngIf="form.get('startDate')?.hasError('required')">Start date is required</mat-error>
        </mat-form-field>

        <!-- Start time -->
        <mat-form-field appearance="outline">
          <mat-label>Start time *</mat-label>
          <input matInput type="time" step="60" formControlName="startTime" />
          <mat-error *ngIf="form.get('startTime')?.hasError('required')">Start time is required</mat-error>
        </mat-form-field>

        <!-- End date -->
        <mat-form-field appearance="outline">
          <mat-label>End date *</mat-label>
          <input matInput [matDatepicker]="ed" formControlName="endDate" />
          <mat-datepicker-toggle matSuffix [for]="ed"></mat-datepicker-toggle>
          <mat-datepicker #ed></mat-datepicker>
          <mat-error *ngIf="form.get('endDate')?.hasError('required')">End date is required</mat-error>
        </mat-form-field>

        <!-- End time -->
        <mat-form-field appearance="outline">
          <mat-label>End time *</mat-label>
          <input matInput type="time" step="60" formControlName="endTime" />
          <mat-error *ngIf="form.get('endTime')?.hasError('required')">End time is required</mat-error>
        </mat-form-field>

        <!-- Range error -->
        <div class="full range-error" *ngIf="rangeInvalid$ | async">
          <mat-icon>error</mat-icon>
          End must be after start.
        </div>

        <!-- Bid Increment -->
        <mat-form-field appearance="outline">
          <mat-label>Bid increment *</mat-label>
          <input matInput type="number" formControlName="bidIncrement" min="0" />
          <mat-error *ngIf="form.get('bidIncrement')?.hasError('required')">Bid increment is required</mat-error>
          <mat-error *ngIf="form.get('bidIncrement')?.hasError('min')">Must be â‰¥ 0</mat-error>
        </mat-form-field>

        <!-- Timezone note -->
        <div class="tz-note">
          <mat-icon>schedule</mat-icon>
          Times are saved in your local timezone. Status will update automatically.
        </div>

      </div>
    </div>
  </mat-dialog-content>

  <!-- Actions -->
  <mat-dialog-actions align="end" class="actions">
    <button mat-stroked-button type="button" class="btn-cancel" (click)="onCancel()">Cancel</button>
    <button mat-flat-button type="submit" class="btn-primary" [disabled]="form.invalid">
      {{ mode === 'edit' ? 'Update' : 'Create' }}
    </button>
  </mat-dialog-actions>
</form>
